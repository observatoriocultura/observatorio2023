import{u as $,a as R,r as _,c as C,o as U,b as n,d as i,e,t as o,f as X,w as r,v as G,g as d,h as g,F as h,i as m,n as z,j as A,P as D,k as q}from"./index-87374ef2.js";const J="/observatorio2023/images/app/orfeo.png",K="/observatorio2023/images/app/logo-dogcc-yellow.png",Q={class:"text-center page-title"},W={key:0,class:"text-center"},Y=e("div",{class:"spinner-border text-secondary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),Z=[Y],ee={key:1,class:"container"},te={class:"mb-2 d-flex justify-content-center"},se={class:"input-group me-2",style:{"max-width":"320px"}},ae=e("i",{class:"fas fa-times"},null,-1),oe=[ae],le={class:"text-center my-2"},ne={class:"text-primary"},ie={class:"text-center my-2"},ce={class:"text-primary"},re={class:"d-flex mb-2 justify-content-center"},de={class:""},ue=["onClick","title"],_e={class:"table bg-white"},ve=e("thead",null,[e("tr",null,[e("th",null,"Núm"),e("th",{class:"only-lg"},"Solicitante"),e("th",null,"Investigación")])],-1),he={class:"text-center"},pe={class:"only-lg"},fe=e("br",null,null,-1),ge=["onClick"],be=e("br",null,null,-1),me={class:"only-lg"},ye={class:"progress d-none",style:{height:"2px"}},Ie=e("i",{class:"fa-solid fa-arrow-left"},null,-1),xe={class:"center_box_800"},Ce={class:"progress mb-2"},De={class:"ficha shadow mb-3"},we={class:"ficha-header d-flex justify-content-between"},ke={style:{"border-left":"3em solid #ffb80c","margin-left":"3em"},class:"p-2"},Te=e("img",{class:"logo-orfeo",src:J,alt:"Logo Orfeo"},null,-1),Pe=e("strong",null,"Orfeo",-1),Le=e("br",null,null,-1),Ee={title:"Expediente documental en Orfeo"},je=e("div",{class:"p-2 only-lg"},[e("img",{class:"logo-dogcc",src:K,alt:"Logo Observatorio de Cultura"})],-1),ze={class:"ficha-body"},Ae={class:"row"},qe={class:"col-md-6"},Se={class:"title"},Ve={class:"col-md-6"},Oe={key:0},Be={width:"65px",class:"text-center"},Ne=["title"],He=["href"],Me=["innerHTML"],Fe=["href"],$e=e("br",null,null,-1),Re=e("td",null,null,-1),Ue={key:0,class:"center_box_800"},Xe=e("h3",{class:"text-center"},"Datos clave",-1),Ge=e("p",{class:"text-center"},"Hallazgos destacados como resultado de la investigación",-1),Je={class:"table bg-white"},Ke={class:"hallazgo-number"},Ye={__name:"Investigaciones",setup(Qe){const S=$(),b=R();let p=b.params.id;const y=_(!0),f=_([]),w=_([]),k=_([]),u=_("table"),l=_({ID:-1,Código:"-",Título:"-",Descripción:"-"}),v=_({q:"",entidad:""}),I=a=>"https://jmojedap.github.io/observatorio/data/pai_"+a+".csv",V=()=>{D.parse(I("investigaciones"),{download:!0,header:!0,complete:a=>{f.value=a.data}})},O=()=>{D.parse(I("productos"),{download:!0,header:!0,complete:a=>{w.value=a.data}})},B=()=>{D.parse(I("hallazgos"),{download:!0,header:!0,complete:a=>{k.value=a.data,y.value=!1,console.log(y.value),b.params.id>0&&P()}})},T=a=>{p=a;const t={...b.params,id:p};S.push({name:b.name,params:t}),P()},P=()=>{console.log(p),l.value=f.value.find(a=>a.ID==p),u.value="details"},N=()=>{u.value="table"},H=()=>{u.value="table"},M=a=>{let t=[];return t["Informe final"]="fa-solid fa-file-lines producto-pdf",t["Informe cuantitativo"]="fa-solid fa-file-lines producto-cuantitativo",t["Base de datos"]="fa-solid fa-table producto-db",t.Presentación="fa-solid fa-display producto-presentacion",t.Anexo="fa-solid fa-file producto-general",t["Visualización/Infografía"]="fa-solid fa-chart-simple producto-dataviz",t.Audiovisual="fa-solid fa-circle-play producto-audiovisual",'<i class="'+t[a]+'"></i>'},L=a=>{let t="status-nd";return a.Estado=="Sin iniciar"&&(t="status-sin-iniciar"),a.Estado=="En espera"&&(t="status-en-espera"),a.Estado=="En ejecución"&&(t="status-en-ejecucion"),a.Estado=="Finalizada"&&(t="status-finalizada"),a.ID==l.value.ID&&(t+=" active"),t},E=C(()=>f.value.filter(t=>{const s=t.Código.toLowerCase().includes(v.value.q.toLowerCase()),c=t.Título.toLowerCase().includes(v.value.q.toLowerCase()),x=t.Descripción.toLowerCase().includes(v.value.q.toLowerCase());return s||c||x})),F=C(()=>w.value.filter(t=>t["ID Investigación"]==l.value.ID&&t.Orden>0)),j=C(()=>k.value.filter(t=>t["ID Investigación"]==l.value.ID));return U(()=>{V(),O(),B()}),(a,t)=>(n(),i(h,null,[e("h1",Q,"Plan Anual de Investigaciones 2023 ("+o(X(p))+")",1),y.value?(n(),i("div",W,Z)):(n(),i("div",ee,[e("div",te,[e("div",se,[r(e("input",{type:"text",name:"q","onUpdate:modelValue":t[0]||(t[0]=s=>v.value.q=s),class:"form-control",placeholder:"Buscar",autofocus:"",onChange:H},null,544),[[G,v.value.q]])]),e("button",{class:"btn-delete-search",type:"button",onClick:t[1]||(t[1]=s=>v.value.q="")},oe)]),r(e("div",le,[e("span",ne,o(E.value.length),1),g(" de "+o(f.value.length),1)],512),[[d,u.value=="table"]]),r(e("div",ie,[g(" ID Investigación · "),e("strong",ce,o(l.value.ID),1)],512),[[d,u.value=="details"]]),e("div",re,[e("div",de,[(n(!0),i(h,null,m(f.value,(s,c)=>(n(),i("button",{type:"button",class:q(["investigacion-sqr me-1",L(s)]),key:c,onClick:x=>T(s.ID),title:s.Código},null,10,ue))),128))])]),r(e("table",_e,[ve,e("tbody",null,[(n(!0),i(h,null,m(E.value,(s,c)=>(n(),i("tr",{key:c},[e("td",he,o(s.ID),1),e("td",pe,[g(o(s.ENTIDAD)+" ",1),fe,g(" "+o(s["Dirección/Dependencia"]),1)]),e("td",null,[e("a",{type:"button",class:"investigacion-title",onClick:x=>T(s.ID)},o(s.Código),9,ge),be,e("span",{class:q(["badge",L(s)])},o(s.Estado),3),e("p",me,o(s["Objetivo de la investigación"]),1),e("div",ye,[e("div",{class:"progress-bar",role:"progressbar",style:z("width: "+s["Porcentaje de avance"]),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},null,4)])])]))),128))])],512),[[d,u.value=="table"]]),r(e("div",null,[e("button",{type:"button",class:"btn btn-light mb-2",onClick:N},[Ie,g(" Tabla ")]),e("div",xe,[e("div",Ce,[e("div",{class:"progress-bar",role:"progressbar",style:z("width: "+l.value["Porcentaje de avance"]),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},o(l.value["Porcentaje de avance"]),5)])]),e("div",De,[e("div",we,[e("div",ke,[Te,Pe,Le,e("span",Ee,o(l.value.EXPEDIENTE),1)]),je]),e("div",ze,[e("div",Ae,[e("div",qe,[e("h3",Se,[r(e("span",null,o(l.value.Código),513),[[d,l.value.Título.length==0]]),r(e("span",null,o(l.value.Título),513),[[d,l.value.Título.length>0]])]),r(e("p",null,o(l.value["Objetivo de la investigación"]),513),[[d,l.value.Descripción.length==0]]),r(e("p",null,o(l.value.Descripción),513),[[d,l.value.Descripción.length>0]])]),e("div",Ve,[e("table",null,[e("tbody",null,[(n(!0),i(h,null,m(F.value,(s,c)=>(n(),i(h,{key:c},[l.value.ID==s["ID Investigación"]?(n(),i("tr",Oe,[e("td",Be,[e("div",{class:"icon-container",title:s["Tipo producto"]},[e("a",{href:s["Link para ficha"],target:"_blank"},[e("span",{innerHTML:M(s["Tipo producto"])},null,8,Me)],8,He)],8,Ne)]),e("td",null,[e("a",{href:s["Link para ficha"],target:"_blank"},o(s.Título),9,Fe),$e]),Re])):A("",!0)],64))),128))])])])])])]),j.value.length>0?(n(),i("div",Ue,[Xe,Ge,e("table",Je,[e("tbody",null,[(n(!0),i(h,null,m(j.value,(s,c)=>(n(),i("tr",{key:c},[e("td",Ke,o(c+1),1),e("td",null,o(s["Texto hallazgo"]),1)]))),128))])])])):A("",!0)],512),[[d,u.value=="details"]])]))],64))}};export{Ye as default};
