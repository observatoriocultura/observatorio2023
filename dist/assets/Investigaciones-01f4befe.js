import{u as $,a as R,r as _,c as C,o as U,b as n,d as i,e,w as r,v as X,f as d,t as o,g as f,F as h,h as m,n as z,i as A,P as D,j as q}from"./index-2f43dca4.js";const G="/observatorio2023/images/app/orfeo.png",J="/observatorio2023/images/app/logo-dogcc-yellow.png",K=e("h1",{class:"text-center page-title"},"Plan Anual de Investigaciones 2023",-1),Q={key:0,class:"text-center"},W=e("div",{class:"spinner-border text-secondary",role:"status"},[e("span",{class:"visually-hidden"},"Loading...")],-1),Y=[W],Z={key:1,class:"container"},ee={class:"mb-2 d-flex justify-content-center"},te={class:"input-group me-2",style:{"max-width":"320px"}},se=e("i",{class:"fas fa-times"},null,-1),ae=[se],oe={class:"text-center my-2"},le={class:"text-primary"},ne={class:"text-center my-2"},ie={class:"text-primary"},ce={class:"d-flex mb-2 justify-content-center"},re={class:""},de=["onClick","title"],ue={class:"table bg-white"},_e=e("thead",null,[e("tr",null,[e("th",null,"Núm"),e("th",{class:"only-lg"},"Solicitante"),e("th",null,"Investigación")])],-1),ve={class:"text-center"},he={class:"only-lg"},pe=e("br",null,null,-1),fe=["onClick"],ge=e("br",null,null,-1),be={class:"only-lg"},me={class:"progress d-none",style:{height:"2px"}},ye=e("i",{class:"fa-solid fa-arrow-left"},null,-1),Ie={class:"center_box_800"},xe={class:"progress mb-2"},Ce={class:"ficha shadow mb-3"},De={class:"ficha-header d-flex justify-content-between"},we={style:{"border-left":"3em solid #ffb80c","margin-left":"3em"},class:"p-2"},ke=e("img",{class:"logo-orfeo",src:G,alt:"Logo Orfeo"},null,-1),Te=e("strong",null,"Orfeo",-1),Pe=e("br",null,null,-1),Le={title:"Expediente documental en Orfeo"},Ee=e("div",{class:"p-2 only-lg"},[e("img",{class:"logo-dogcc",src:J,alt:"Logo Observatorio de Cultura"})],-1),je={class:"ficha-body"},ze={class:"row"},Ae={class:"col-md-6"},qe={class:"title"},Se={class:"col-md-6"},Ve={key:0},Oe={width:"65px",class:"text-center"},Be=["title"],Ne=["href"],He=["innerHTML"],Me=["href"],Fe=e("br",null,null,-1),$e=e("td",null,null,-1),Re={key:0,class:"center_box_800"},Ue=e("h3",{class:"text-center"},"Datos clave",-1),Xe=e("p",{class:"text-center"},"Hallazgos destacados como resultado de la investigación",-1),Ge={class:"table bg-white"},Je={class:"hallazgo-number"},We={__name:"Investigaciones",setup(Ke){const S=$(),g=R();let b=g.params.id;const y=_(!0),p=_([]),w=_([]),k=_([]),u=_("table"),l=_({ID:-1,Código:"-",Título:"-",Descripción:"-"}),v=_({q:"",entidad:""}),I=a=>"https://jmojedap.github.io/observatorio/data/pai_"+a+".csv",V=()=>{D.parse(I("investigaciones"),{download:!0,header:!0,complete:a=>{p.value=a.data}})},O=()=>{D.parse(I("productos"),{download:!0,header:!0,complete:a=>{w.value=a.data}})},B=()=>{D.parse(I("hallazgos"),{download:!0,header:!0,complete:a=>{k.value=a.data,y.value=!1,console.log(y.value),g.params.id>0&&P()}})},T=a=>{b=a;const t={...g.params,id:b};S.push({name:g.name,params:t}),P()},P=()=>{console.log(b),l.value=p.value.find(a=>a.ID==b),u.value="details"},N=()=>{u.value="table"},H=()=>{u.value="table"},M=a=>{let t=[];return t["Informe final"]="fa-solid fa-file-lines producto-pdf",t["Informe cuantitativo"]="fa-solid fa-file-lines producto-cuantitativo",t["Base de datos"]="fa-solid fa-table producto-db",t.Presentación="fa-solid fa-display producto-presentacion",t.Anexo="fa-solid fa-file producto-general",t["Visualización/Infografía"]="fa-solid fa-chart-simple producto-dataviz",t.Audiovisual="fa-solid fa-circle-play producto-audiovisual",'<i class="'+t[a]+'"></i>'},L=a=>{let t="status-nd";return a.Estado=="Sin iniciar"&&(t="status-sin-iniciar"),a.Estado=="En espera"&&(t="status-en-espera"),a.Estado=="En ejecución"&&(t="status-en-ejecucion"),a.Estado=="Finalizada"&&(t="status-finalizada"),a.ID==l.value.ID&&(t+=" active"),t},E=C(()=>p.value.filter(t=>{const s=t.Código.toLowerCase().includes(v.value.q.toLowerCase()),c=t.Título.toLowerCase().includes(v.value.q.toLowerCase()),x=t.Descripción.toLowerCase().includes(v.value.q.toLowerCase());return s||c||x})),F=C(()=>w.value.filter(t=>t["ID Investigación"]==l.value.ID&&t.Orden>0)),j=C(()=>k.value.filter(t=>t["ID Investigación"]==l.value.ID));return U(()=>{V(),O(),B()}),(a,t)=>(n(),i(h,null,[K,y.value?(n(),i("div",Q,Y)):(n(),i("div",Z,[e("div",ee,[e("div",te,[r(e("input",{type:"text",name:"q","onUpdate:modelValue":t[0]||(t[0]=s=>v.value.q=s),class:"form-control",placeholder:"Buscar",autofocus:"",onChange:H},null,544),[[X,v.value.q]])]),e("button",{class:"btn-delete-search",type:"button",onClick:t[1]||(t[1]=s=>v.value.q="")},ae)]),r(e("div",oe,[e("span",le,o(E.value.length),1),f(" de "+o(p.value.length),1)],512),[[d,u.value=="table"]]),r(e("div",ne,[f(" ID Investigación · "),e("strong",ie,o(l.value.ID),1)],512),[[d,u.value=="details"]]),e("div",ce,[e("div",re,[(n(!0),i(h,null,m(p.value,(s,c)=>(n(),i("button",{type:"button",class:q(["investigacion-sqr me-1",L(s)]),key:c,onClick:x=>T(s.ID),title:s.Código},null,10,de))),128))])]),r(e("table",ue,[_e,e("tbody",null,[(n(!0),i(h,null,m(E.value,(s,c)=>(n(),i("tr",{key:c},[e("td",ve,o(s.ID),1),e("td",he,[f(o(s.ENTIDAD)+" ",1),pe,f(" "+o(s["Dirección/Dependencia"]),1)]),e("td",null,[e("a",{type:"button",class:"investigacion-title",onClick:x=>T(s.ID)},o(s.Código),9,fe),ge,e("span",{class:q(["badge",L(s)])},o(s.Estado),3),e("p",be,o(s["Objetivo de la investigación"]),1),e("div",me,[e("div",{class:"progress-bar",role:"progressbar",style:z("width: "+s["Porcentaje de avance"]),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},null,4)])])]))),128))])],512),[[d,u.value=="table"]]),r(e("div",null,[e("button",{type:"button",class:"btn btn-light mb-2",onClick:N},[ye,f(" Tabla ")]),e("div",Ie,[e("div",xe,[e("div",{class:"progress-bar",role:"progressbar",style:z("width: "+l.value["Porcentaje de avance"]),"aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"},o(l.value["Porcentaje de avance"]),5)])]),e("div",Ce,[e("div",De,[e("div",we,[ke,Te,Pe,e("span",Le,o(l.value.EXPEDIENTE),1)]),Ee]),e("div",je,[e("div",ze,[e("div",Ae,[e("h3",qe,[r(e("span",null,o(l.value.Código),513),[[d,l.value.Título.length==0]]),r(e("span",null,o(l.value.Título),513),[[d,l.value.Título.length>0]])]),r(e("p",null,o(l.value["Objetivo de la investigación"]),513),[[d,l.value.Descripción.length==0]]),r(e("p",null,o(l.value.Descripción),513),[[d,l.value.Descripción.length>0]])]),e("div",Se,[e("table",null,[e("tbody",null,[(n(!0),i(h,null,m(F.value,(s,c)=>(n(),i(h,{key:c},[l.value.ID==s["ID Investigación"]?(n(),i("tr",Ve,[e("td",Oe,[e("div",{class:"icon-container",title:s["Tipo producto"]},[e("a",{href:s["Link para ficha"],target:"_blank"},[e("span",{innerHTML:M(s["Tipo producto"])},null,8,He)],8,Ne)],8,Be)]),e("td",null,[e("a",{href:s["Link para ficha"],target:"_blank"},o(s.Título),9,Me),Fe]),$e])):A("",!0)],64))),128))])])])])])]),j.value.length>0?(n(),i("div",Re,[Ue,Xe,e("table",Ge,[e("tbody",null,[(n(!0),i(h,null,m(j.value,(s,c)=>(n(),i("tr",{key:c},[e("td",Je,o(c+1),1),e("td",null,o(s["Texto hallazgo"]),1)]))),128))])])])):A("",!0)],512),[[d,u.value=="details"]])]))],64))}};export{We as default};
